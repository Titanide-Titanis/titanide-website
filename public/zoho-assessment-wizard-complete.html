<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compliance Effectiveness Assessment Wizard - Titanide Consulting</title>
    <style>
        :root {
            --primary: 210 90% 45%;
            --primary-foreground: 210 30% 96%;
            --secondary: 210 30% 95%;
            --secondary-foreground: 210 30% 10%;
            --muted: 210 30% 96%;
            --muted-foreground: 210 30% 45%;
            --accent: 210 40% 90%;
            --accent-foreground: 210 30% 10%;
            --destructive: 0 85% 60%;
            --destructive-foreground: 210 30% 96%;
            --border: 210 30% 85%;
            --input: 210 30% 85%;
            --ring: 210 90% 45%;
            --background: 0 0% 100%;
            --foreground: 210 30% 10%;
            --card: 0 0% 100%;
            --card-foreground: 210 30% 10%;
            --titanide-gold: 42 65% 60%;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: hsl(var(--foreground));
            background: linear-gradient(135deg, hsl(var(--background)), hsl(var(--muted)));
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .back-link {
            display: flex;
            align-items: center;
            color: hsl(var(--muted-foreground));
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .back-link:hover {
            color: hsl(var(--foreground));
        }

        .step-indicator {
            font-size: 0.875rem;
            color: hsl(var(--muted-foreground));
        }

        .progress-section {
            margin-bottom: 2rem;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
            color: hsl(var(--muted-foreground));
            margin-bottom: 0.5rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: hsl(var(--muted));
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: hsl(var(--primary));
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 12.5%;
        }

        .card {
            background: hsl(var(--card));
            border: 1px solid hsl(var(--border));
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            margin-bottom: 2rem;
        }

        .card-header {
            padding: 2rem 2rem 1rem;
            border-bottom: 1px solid hsl(var(--border));
        }

        .card-title-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .icon-container {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-color: hsl(var(--primary) / 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .icon {
            width: 24px;
            height: 24px;
            color: hsl(var(--primary));
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: hsl(var(--foreground));
            margin: 0;
        }

        .card-description {
            color: hsl(var(--muted-foreground));
            margin-top: 0.5rem;
        }

        .card-content {
            padding: 2rem;
        }

        .question-container {
            margin-bottom: 2rem;
        }

        .question-container:not(:last-child) {
            border-bottom: 1px solid hsl(var(--border));
            padding-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .label {
            display: block;
            font-size: 1rem;
            font-weight: 500;
            color: hsl(var(--foreground));
            margin-bottom: 0.75rem;
        }

        .required {
            color: hsl(var(--destructive));
            margin-left: 0.25rem;
        }

        .input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid hsl(var(--input));
            border-radius: 8px;
            font-size: 1rem;
            background: hsl(var(--background));
            color: hsl(var(--foreground));
            transition: border-color 0.2s ease;
        }

        .input:focus {
            outline: none;
            border-color: hsl(var(--ring));
            box-shadow: 0 0 0 2px hsl(var(--ring) / 0.2);
        }

        .radio-group, .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .radio-item, .checkbox-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .radio-input, .checkbox-input {
            width: 16px;
            height: 16px;
            border: 2px solid hsl(var(--border));
            background: hsl(var(--background));
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .radio-input {
            border-radius: 50%;
        }

        .checkbox-input {
            border-radius: 4px;
        }

        .radio-input:checked {
            border-color: hsl(var(--primary));
            background: hsl(var(--primary));
            box-shadow: inset 0 0 0 3px hsl(var(--background));
        }

        .checkbox-input:checked {
            border-color: hsl(var(--primary));
            background: hsl(var(--primary));
        }

        .radio-label, .checkbox-label {
            font-size: 1rem;
            color: hsl(var(--foreground));
            cursor: pointer;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
            min-width: 120px;
        }

        .btn-primary:hover:not(:disabled) {
            background: hsl(var(--primary) / 0.9);
        }

        .btn-outline {
            background: hsl(var(--background));
            color: hsl(var(--foreground));
            border: 1px solid hsl(var(--border));
        }

        .btn-outline:hover:not(:disabled) {
            background: hsl(var(--accent));
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .warning {
            margin-top: 1rem;
            padding: 1rem;
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            display: none;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .warning.show {
            display: flex;
        }

        .warning-icon {
            width: 20px;
            height: 20px;
            color: #d97706;
            margin-top: 2px;
            flex-shrink: 0;
        }

        .warning-text {
            font-size: 0.875rem;
            color: #92400e;
        }

        .hidden {
            display: none !important;
        }

        .domains-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .domain-card {
            background: hsl(var(--titanide-gold) / 0.1);
            border: 1px solid hsl(var(--titanide-gold) / 0.3);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            font-size: 0.875rem;
            font-weight: 500;
            color: hsl(var(--foreground));
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .card-header,
            .card-content {
                padding: 1.5rem;
            }
            
            .header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <a href="http://www.titanideconsulting.com/assessment" class="back-link">
                <svg class="icon" style="margin-right: 8px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="m12 19-7-7 7-7"/>
                    <path d="M19 12H5"/>
                </svg>
                Back to Assessment
            </a>
            <div class="step-indicator">
                Step <span id="current-step">1</span> of <span id="total-steps">8</span>
            </div>
        </div>

        <!-- Progress -->
        <div class="progress-section">
            <div class="progress-header">
                <span>Assessment Progress</span>
                <span id="progress-percent">13% Complete</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>

        <!-- Compliance Domains Overview -->
        <div id="domains-overview" class="card">
            <div class="card-header">
                <div style="text-align: center;">
                    <h2 class="card-title">10 Critical Compliance Domains</h2>
                    <p class="card-description">
                        This assessment evaluates your organization across these essential compliance areas
                    </p>
                </div>
            </div>
            <div class="card-content">
                <div class="domains-grid">
                    <div class="domain-card">Governance & Leadership</div>
                    <div class="domain-card">Policies & Procedures</div>
                    <div class="domain-card">Training & Awareness</div>
                    <div class="domain-card">Monitoring & Auditing</div>
                    <div class="domain-card">Reporting & Response</div>
                    <div class="domain-card">Third-Party Risk</div>
                    <div class="domain-card">Privacy & Data Protection</div>
                    <div class="domain-card">Incident Management</div>
                    <div class="domain-card">Regulatory Alignment</div>
                    <div class="domain-card">Continuous Improvement</div>
                </div>
                <div style="text-align: center; margin-top: 2rem;">
                    <button class="btn btn-primary" onclick="startAssessment()">
                        Begin Assessment
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="m9 18 6-6-6-6"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Current Step Card -->
        <div class="card hidden" id="assessment-card">
            <div class="card-header">
                <div class="card-title-container">
                    <div class="icon-container">
                        <svg class="icon" id="step-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="m22 21-3-3"/>
                        </svg>
                    </div>
                    <div>
                        <h2 class="card-title" id="step-title">User Information</h2>
                        <p class="card-description">
                            Please answer all questions to continue to the next section.
                        </p>
                    </div>
                </div>
            </div>
            <div class="card-content">
                <div id="questions-container">
                    <!-- Questions will be populated here by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="navigation hidden" id="navigation">
            <button class="btn btn-outline" id="prev-btn" onclick="previousStep()" disabled>
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="m12 19-7-7 7-7"/>
                    <path d="M19 12H5"/>
                </svg>
                Previous
            </button>
            
            <button class="btn btn-primary" id="next-btn" onclick="nextStep()" disabled>
                <span id="next-text">Next</span>
                <svg class="icon" id="next-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="m9 18 6-6-6-6"/>
                </svg>
            </button>
        </div>

        <!-- Warning for incomplete step -->
        <div class="warning" id="warning">
            <svg class="warning-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                <path d="M12 9v4"/>
                <path d="m12 17 .01 0"/>
            </svg>
            <div class="warning-text">
                Please answer all required questions (marked with *) to continue.
            </div>
        </div>
    </div>

    <script>
        let currentStep = 0;
        let responses = {};

        // Enhanced scoring weights by domain criticality
        const domainWeights = {
            "governance": 15,      // Critical foundation
            "policies": 12,        // Essential framework
            "training": 10,        // Human factor
            "monitoring": 13,      // Detection capability
            "reporting": 11,       // Response efficiency
            "third_party": 9,      // External risk
            "privacy": 12,         // Data protection
            "incident": 8,         // Crisis management
            "regulatory": 10,      // Compliance alignment
            "improvement": 5       // Continuous enhancement
        };

        const steps = [
            {
                id: "user-info",
                title: "User Information",
                domain: "user",
                weight: 0,
                icon: `<path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="m22 21-3-3"/>`,
                questions: [
                    { id: "full_name", type: "text", question: "Full Name", required: true },
                    { id: "email", type: "email", question: "Email Address", required: true },
                    { id: "job_title", type: "text", question: "Job Title", required: true },
                    { id: "company_name", type: "text", question: "Company Name", required: true },
                    { id: "department", type: "text", question: "Department/Division", required: false },
                    { id: "phone", type: "text", question: "Phone Number", required: false },
                    {
                        id: "industry_sector",
                        type: "select",
                        question: "Industry Sector",
                        required: true,
                        options: [
                            "Financial Services",
                            "Healthcare & Life Sciences",
                            "Technology & Software",
                            "Manufacturing",
                            "Energy & Utilities",
                            "Government & Public Sector",
                            "Education",
                            "Professional Services",
                            "Retail & Consumer Goods",
                            "Transportation & Logistics",
                            "Other"
                        ]
                    },
                    {
                        id: "organization_size",
                        type: "radio",
                        question: "Organization Size",
                        required: true,
                        options: [
                            "Small Business (1-50 employees)",
                            "Medium Business (51-250 employees)",
                            "Large Business (251-1,000 employees)",
                            "Large Enterprise (1,001-10,000 employees)",
                            "Global Enterprise (10,000+ employees)"
                        ]
                    },
                    {
                        id: "applicable_regulations",
                        type: "checkbox",
                        question: "Which regulations apply to your organization? (Select all that apply)",
                        required: true,
                        options: [
                            "GDPR (General Data Protection Regulation)",
                            "HIPAA (Health Insurance Portability)",
                            "SOX (Sarbanes-Oxley Act)",
                            "PCI DSS (Payment Card Industry)",
                            "CCPA (California Consumer Privacy Act)",
                            "ISO 27001",
                            "NIST Framework",
                            "Industry-specific regulations",
                            "Other regulatory requirements"
                        ]
                    },
                    {
                        id: "compliance_maturity",
                        type: "radio",
                        question: "How would you describe your organization's compliance maturity?",
                        required: true,
                        options: [
                            "Initial: Basic awareness with ad-hoc processes",
                            "Developing: Structured program with defined processes",
                            "Managed: Comprehensive program with regular monitoring",
                            "Advanced: Integrated program with continuous improvement",
                            "Optimized: Industry-leading program with innovation"
                        ]
                    },
                    {
                        id: "reporting_structure",
                        type: "radio",
                        question: "Who do you report to regarding compliance matters?",
                        required: true,
                        options: [
                            "Chief Executive Officer (CEO)",
                            "Chief Risk Officer (CRO)",
                            "General Counsel",
                            "Chief Financial Officer (CFO)",
                            "Board of Directors",
                            "Audit Committee",
                            "Other C-Level Executive"
                        ]
                    }
                ]
            },
            {
                id: "organization",
                title: "Organizational Profile",
                icon: `<path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"/><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"/><path d="M10 6h4"/><path d="M10 10h4"/><path d="M10 14h4"/><path d="M10 18h4"/>`,
                questions: [
                    { id: "company_name", type: "text", question: "Organization Name", required: true },
                    {
                        id: "industry_sector",
                        type: "radio",
                        question: "Primary Industry Sector",
                        required: true,
                        options: [
                            "Healthcare & Life Sciences",
                            "Financial Services & Banking",
                            "Technology & Software",
                            "Manufacturing & Industrial",
                            "Energy & Utilities",
                            "Education & Research",
                            "Government & Public Sector",
                            "Retail & Consumer Goods",
                            "Professional Services",
                            "Real Estate & Construction",
                            "Transportation & Logistics",
                            "Media & Entertainment"
                        ]
                    },
                    {
                        id: "organization_size",
                        type: "radio",
                        question: "Organization Size (Full-time Employees)",
                        required: true,
                        options: [
                            "Startup (1-50 employees)",
                            "Small Enterprise (51-250 employees)",
                            "Mid-Market (251-1,000 employees)",
                            "Large Enterprise (1,001-10,000 employees)",
                            "Fortune 1000 (10,001+ employees)"
                        ]
                    },
                    {
                        id: "revenue_range",
                        type: "radio",
                        question: "Annual Revenue Range",
                        required: true,
                        options: [
                            "Under $10M",
                            "$10M - $50M",
                            "$50M - $250M",
                            "$250M - $1B",
                            "$1B - $10B",
                            "Over $10B"
                        ]
                    },
                    {
                        id: "public_company",
                        type: "radio",
                        question: "Is your organization publicly traded?",
                        required: true,
                        options: [
                            "Yes, US public company (SEC reporting)",
                            "Yes, international public company",
                            "No, privately held",
                            "Non-profit organization",
                            "Government entity"
                        ]
                    }
                ]
            },
            {
                id: "governance-leadership",
                title: "Governance & Leadership",
                icon: `<path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/>`,
                questions: [
                    {
                        id: "compliance_organization",
                        type: "radio",
                        question: "How is your compliance function organized?",
                        required: true,
                        options: [
                            "Dedicated Chief Compliance Officer with team",
                            "Compliance function within Legal department",
                            "Compliance function within Risk Management",
                            "Compliance function within Finance/Audit",
                            "Distributed across multiple departments",
                            "No formal compliance organization"
                        ]
                    },
                    {
                        id: "board_oversight",
                        type: "radio",
                        question: "How frequently does the Board of Directors review compliance matters?",
                        required: true,
                        options: [
                            "Monthly",
                            "Quarterly",
                            "Semi-annually",
                            "Annually",
                            "As needed/Ad-hoc",
                            "No formal board oversight"
                        ]
                    },
                    {
                        id: "risk_appetite",
                        type: "radio",
                        question: "Has the Board established a formal risk appetite statement?",
                        required: true,
                        options: [
                            "Yes, comprehensive and regularly updated",
                            "Yes, basic statement exists",
                            "In development",
                            "No formal risk appetite statement",
                            "Not applicable"
                        ]
                    }
                ]
            },
            {
                id: "policies-procedures",
                title: "Policies & Procedures",
                icon: `<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14,2 14,8 20,8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10,9 9,9 8,9"/>`,
                questions: [
                    {
                        id: "policy_framework",
                        type: "radio",
                        question: "What is the current state of your policy framework?",
                        required: true,
                        options: [
                            "Comprehensive, regularly updated policies",
                            "Established policies with periodic reviews",
                            "Basic policies, some outdated",
                            "Minimal policies, mostly outdated",
                            "No formal policy framework"
                        ]
                    },
                    {
                        id: "policy_review",
                        type: "radio",
                        question: "How frequently are policies reviewed and updated?",
                        required: true,
                        options: [
                            "Continuously as needed",
                            "Annually",
                            "Every 2-3 years",
                            "Only when issues arise",
                            "No regular review process"
                        ]
                    },
                    {
                        id: "policy_enforcement",
                        type: "radio",
                        question: "How is policy compliance monitored and enforced?",
                        required: true,
                        options: [
                            "Automated monitoring with enforcement",
                            "Regular audits with enforcement actions",
                            "Periodic checks with inconsistent enforcement",
                            "Minimal monitoring, reactive enforcement",
                            "No formal enforcement mechanism"
                        ]
                    }
                ]
            },
            {
                id: "training-awareness",
                title: "Training & Awareness",
                icon: `<path d="m16 6 4 14"/><path d="M12 6v14"/><path d="M8 8v12"/><path d="M4 4v16"/>`,
                questions: [
                    {
                        id: "training_program",
                        type: "radio",
                        question: "What is the maturity of your compliance training program?",
                        required: true,
                        options: [
                            "Comprehensive program with role-based training",
                            "Established program with regular updates",
                            "Basic training program",
                            "Ad-hoc training as needed",
                            "No formal training program"
                        ]
                    },
                    {
                        id: "training_tracking",
                        type: "radio",
                        question: "How do you track training completion and effectiveness?",
                        required: true,
                        options: [
                            "Automated LMS with comprehensive tracking",
                            "Manual tracking with completion records",
                            "Basic completion tracking",
                            "Minimal tracking",
                            "No tracking mechanism"
                        ]
                    },
                    {
                        id: "awareness_program",
                        type: "radio",
                        question: "Do you have ongoing compliance awareness initiatives?",
                        required: true,
                        options: [
                            "Regular awareness campaigns and communications",
                            "Periodic awareness initiatives",
                            "Basic awareness efforts",
                            "Minimal awareness activities",
                            "No formal awareness program"
                        ]
                    }
                ]
            },
            {
                id: "monitoring-auditing",
                title: "Monitoring & Auditing",
                icon: `<path d="M9 12l2 2 4-4"/><path d="M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1h8z"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"/>`,
                questions: [
                    {
                        id: "audit_program",
                        type: "radio",
                        question: "What is the structure of your compliance audit program?",
                        required: true,
                        options: [
                            "Comprehensive program with continuous monitoring",
                            "Regular scheduled audits",
                            "Periodic audits as needed",
                            "Basic audit activities",
                            "No routine compliance audits"
                        ]
                    },
                    {
                        id: "monitoring_controls",
                        type: "radio",
                        question: "How mature are your compliance monitoring controls?",
                        required: true,
                        options: [
                            "Automated monitoring with real-time alerts",
                            "Regular monitoring with periodic reports",
                            "Basic monitoring capabilities",
                            "Manual monitoring processes",
                            "Reactive approach to compliance issues"
                        ]
                    },
                    {
                        id: "audit_findings",
                        type: "radio",
                        question: "How are audit findings tracked and remediated?",
                        required: true,
                        options: [
                            "Automated tracking with deadlines",
                            "Formal tracking with regular follow-up",
                            "Basic tracking system",
                            "Manual tracking",
                            "Findings not systematically tracked"
                        ]
                    }
                ]
            },
            {
                id: "reporting-response",
                title: "Reporting & Response",
                icon: `<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7,10 12,15 17,10"/><line x1="12" y1="15" x2="12" y2="3"/>`,
                questions: [
                    {
                        id: "incident_reporting",
                        type: "radio",
                        question: "What is the maturity of your incident reporting process?",
                        required: true,
                        options: [
                            "Comprehensive reporting with automated workflows",
                            "Established reporting procedures",
                            "Basic reporting process",
                            "Informal reporting",
                            "No formal incident reporting process"
                        ]
                    },
                    {
                        id: "breach_response",
                        type: "radio",
                        question: "How defined is your breach response procedure?",
                        required: true,
                        options: [
                            "Comprehensive response plan with tested procedures",
                            "Documented response plan",
                            "Basic response procedures",
                            "Informal response approach",
                            "Response procedures undefined"
                        ]
                    },
                    {
                        id: "regulatory_reporting",
                        type: "radio",
                        question: "How do you manage regulatory reporting requirements?",
                        required: true,
                        options: [
                            "Automated reporting systems",
                            "Systematic reporting processes",
                            "Manual but organized reporting",
                            "Ad-hoc manual reporting",
                            "Reactive regulatory reporting"
                        ]
                    }
                ]
            },
            {
                id: "continuous-improvement",
                title: "Continuous Improvement",
                icon: `<path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16l-5 5v-5h5"/>`,
                questions: [
                    {
                        id: "maturity_assessment",
                        type: "radio",
                        question: "How frequently do you assess compliance program maturity?",
                        required: true,
                        options: [
                            "Continuous assessment and improvement",
                            "Annual comprehensive assessments",
                            "Periodic assessments",
                            "Assessment only when issues arise",
                            "Maturity assessments not conducted"
                        ]
                    },
                    {
                        id: "improvement_program",
                        type: "radio",
                        question: "What is the structure of your improvement program?",
                        required: true,
                        options: [
                            "Formal continuous improvement program",
                            "Structured improvement initiatives",
                            "Basic improvement efforts",
                            "Reactive improvement approach",
                            "No formal improvement program"
                        ]
                    },
                    {
                        id: "metrics_tracking",
                        type: "radio",
                        question: "How comprehensive is your compliance metrics tracking?",
                        required: true,
                        options: [
                            "Comprehensive KPIs with dashboards",
                            "Regular metrics tracking and reporting",
                            "Basic metrics collection",
                            "Limited metrics tracking",
                            "No formal metrics program"
                        ]
                    }
                ]
            }
        ];

        function startAssessment() {
            document.getElementById('domains-overview').classList.add('hidden');
            document.getElementById('assessment-card').classList.remove('hidden');
            document.getElementById('navigation').classList.remove('hidden');
            loadStep();
        }

        function loadStep() {
            const step = steps[currentStep];
            const totalSteps = steps.length;
            
            // Update progress
            const progressPercent = Math.round(((currentStep + 1) / totalSteps) * 100);
            document.getElementById('current-step').textContent = currentStep + 1;
            document.getElementById('total-steps').textContent = totalSteps;
            document.getElementById('progress-percent').textContent = progressPercent + '% Complete';
            document.getElementById('progress-fill').style.width = progressPercent + '%';
            
            // Update step info
            document.getElementById('step-title').textContent = step.title;
            document.getElementById('step-icon').innerHTML = step.icon;
            
            // Load questions
            const container = document.getElementById('questions-container');
            container.innerHTML = '';
            
            step.questions.forEach(question => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-container';
                
                let questionHTML = `
                    <div class="form-group">
                        <label class="label">
                            ${question.question}
                            ${question.required ? '<span class="required">*</span>' : ''}
                        </label>
                `;
                
                if (question.type === 'text' || question.type === 'email') {
                    questionHTML += `
                        <input 
                            type="${question.type}" 
                            id="${question.id}" 
                            class="input" 
                            ${question.required ? 'required' : ''} 
                            value="${responses[question.id] || ''}"
                            onchange="updateResponse('${question.id}', this.value)"
                        />
                    `;
                } else if (question.type === 'radio') {
                    questionHTML += '<div class="radio-group">';
                    question.options.forEach((option, index) => {
                        questionHTML += `
                            <div class="radio-item">
                                <input 
                                    type="radio" 
                                    id="${question.id}_${index}" 
                                    name="${question.id}" 
                                    value="${option}" 
                                    class="radio-input"
                                    ${responses[question.id] === option ? 'checked' : ''}
                                    onchange="updateResponse('${question.id}', this.value)"
                                />
                                <label for="${question.id}_${index}" class="radio-label">${option}</label>
                            </div>
                        `;
                    });
                    questionHTML += '</div>';
                } else if (question.type === 'checkbox') {
                    questionHTML += '<div class="checkbox-group">';
                    question.options.forEach((option, index) => {
                        const isChecked = responses[question.id] && responses[question.id].includes(option);
                        questionHTML += `
                            <div class="checkbox-item">
                                <input 
                                    type="checkbox" 
                                    id="${question.id}_${index}" 
                                    name="${question.id}" 
                                    value="${option}" 
                                    class="checkbox-input"
                                    ${isChecked ? 'checked' : ''}
                                    onchange="updateCheckboxResponse('${question.id}', this.value, this.checked)"
                                />
                                <label for="${question.id}_${index}" class="checkbox-label">${option}</label>
                            </div>
                        `;
                    });
                    questionHTML += '</div>';
                }
                
                questionHTML += '</div>';
                questionDiv.innerHTML = questionHTML;
                container.appendChild(questionDiv);
            });
            
            updateNavigationButtons();
        }

        function updateResponse(questionId, value) {
            responses[questionId] = value;
            updateNavigationButtons();
        }

        function updateCheckboxResponse(questionId, value, checked) {
            if (!responses[questionId]) {
                responses[questionId] = [];
            }
            
            if (checked) {
                if (!responses[questionId].includes(value)) {
                    responses[questionId].push(value);
                }
            } else {
                responses[questionId] = responses[questionId].filter(item => item !== value);
            }
            
            updateNavigationButtons();
        }

        function updateNavigationButtons() {
            const step = steps[currentStep];
            const requiredQuestions = step.questions.filter(q => q.required);
            const allAnswered = requiredQuestions.every(q => {
                if (q.type === 'checkbox') {
                    return responses[q.id] && responses[q.id].length > 0;
                }
                return responses[q.id] && responses[q.id].trim() !== '';
            });
            
            document.getElementById('next-btn').disabled = !allAnswered;
            document.getElementById('prev-btn').disabled = currentStep === 0;
            
            // Update next button text for last step
            if (currentStep === steps.length - 1) {
                document.getElementById('next-text').textContent = 'Complete Assessment';
                document.getElementById('next-icon').innerHTML = `
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                    <polyline points="22,4 12,14.01 9,11.01"/>
                `;
            } else {
                document.getElementById('next-text').textContent = 'Next';
                document.getElementById('next-icon').innerHTML = `<path d="m9 18 6-6-6-6"/>`;
            }
        }

        function nextStep() {
            const step = steps[currentStep];
            const requiredQuestions = step.questions.filter(q => q.required);
            const allAnswered = requiredQuestions.every(q => {
                if (q.type === 'checkbox') {
                    return responses[q.id] && responses[q.id].length > 0;
                }
                return responses[q.id] && responses[q.id].trim() !== '';
            });
            
            if (!allAnswered) {
                document.getElementById('warning').classList.add('show');
                return;
            }
            
            document.getElementById('warning').classList.remove('show');
            
            if (currentStep < steps.length - 1) {
                currentStep++;
                loadStep();
            } else {
                completeAssessment();
            }
        }

        function previousStep() {
            if (currentStep > 0) {
                currentStep--;
                loadStep();
            }
        }

        function completeAssessment() {
            // Calculate score
            const score = calculateScore();
            
            // Save data
            const assessmentData = {
                responses: responses,
                score: score,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('assessmentData', JSON.stringify(assessmentData));
            
            // Redirect to results
            window.location.href = 'http://www.titanideconsulting.com/assessment-results';
        }

        function calculateScore() {
            // Simple scoring algorithm - can be enhanced
            let totalScore = 0;
            let questionCount = 0;
            
            steps.forEach(step => {
                step.questions.forEach(question => {
                    if (responses[question.id]) {
                        questionCount++;
                        if (question.type === 'radio') {
                            const options = question.options;
                            const selectedIndex = options.indexOf(responses[question.id]);
                            totalScore += ((options.length - selectedIndex) / options.length) * 100;
                        } else if (question.type === 'checkbox') {
                            totalScore += (responses[question.id].length / question.options.length) * 100;
                        } else {
                            totalScore += 50; // Default score for text inputs
                        }
                    }
                });
            });
            
            return questionCount > 0 ? Math.round(totalScore / questionCount) : 0;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Setup any initial state if needed
        });
    </script>
</body>
</html>